echo "/server/logs/nginx/*.log {
    weekly
    maxsize 100M
    missingok
    rotate 40
    compress
    delaycompress
    dateext
    dateformat -%Y%m%d.%s
    notifempty
    create 0640 nginx nginx
    sharedscripts
    postrotate
        if [ -f /run/nginx/process.pid ]; then
            /usr/bin/kill -USR1 \$(/bin/cat /run/nginx/process.pid)
        fi
    endscript
}" > /etc/logrotate.d/nginx